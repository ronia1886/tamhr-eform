!function (e, t) { var i = { init: function (i, n, o) { var s, l = this; this.warning = s = e(i), this.resume = e(n), this.options = o, this.countdownOpen = !1, this.failedRequests = o.failedRequests, this._startTimer(), this.title = document.title, e.data(s[0], "idletimeout", this), e.idleTimer(1e3 * o.idleAfter), e(document).bind("idle.idleTimer", function () { "idle" !== e.data(document, "idleTimer") || l.countdownOpen || (l._stopTimer(), l.countdownOpen = !0, l._idle()) }), this.resume.bind("click", function (e) { e.preventDefault(), t.clearInterval(l.countdown), l.countdownOpen = !1, l._startTimer(), l._keepAlive(!1), o.onResume.call(l.warning) }) }, _idle: function () { var e = this, i = this.options, n = this.warning[0], o = i.warningLength; i.onIdle.call(n), i.onCountdown.call(n, o), this.countdown = t.setInterval(function () { 0 == --o ? (window.clearInterval(e.countdown), i.onTimeout.call(n)) : (i.onCountdown.call(n, o), document.title = i.titleMessage.replace("%s", o) + e.title) }, 1e3) }, _startTimer: function () { var e = this; this.timer = t.setTimeout(function () { e._keepAlive() }, 1e3 * this.options.pollingInterval) }, _stopTimer: function () { this.failedRequests = this.options.failedRequests, t.clearTimeout(this.timer) }, _keepAlive: function (t) { var i = this, n = this.options; if (document.title = i.title, void 0 === t && (t = !0), !this.failedRequests) return this._stopTimer(), void n.onAbort.call(this.warning[0]); e.ajax({ timeout: n.AJAXTimeout, url: n.keepAliveURL, error: function (e, t, n) { "abort" != e.statusText && "timeout" != e.statusText && i.failedRequests-- }, success: function (t) { e.trim(t) !== n.serverResponseEquals && i.failedRequests-- }, complete: function () { t && i._startTimer() } }) } }; e.idleTimeout = function (t, n, o) { return i.init(t, n, e.extend(e.idleTimeout.options, o)), this }, e.idleTimeout.options = { warningLength: 30, keepAliveURL: "", serverResponseEquals: "OK", idleAfter: 600, pollingInterval: 60, failedRequests: 5, AJAXTimeout: 250, titleMessage: "Warning: %s seconds until log out | ", onTimeout: e.noop, onIdle: e.noop, onCountdown: e.noop, onResume: e.noop, onAbort: e.noop } }(jQuery, window);