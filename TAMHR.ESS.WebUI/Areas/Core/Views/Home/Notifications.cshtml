@section pageToolbars {
    <div class="dropdown">
        <a href="javascript:;" class="btn btn-sm dropdown-toggle red-sunglo" data-toggle="dropdown">
            <i class="ft-settings"></i> <span class="d-none d-sm-inline">@Localizer["Actions"]</span> <i class="ft-chevron-down"></i>
        </a>
        <ul class="dropdown-menu dropdown-menu-right">
            <li>
                <a href="javascript:;" data-trigger="handler" data-handler="clearAllHandler">
                    @Localizer["Clear All"]
                </a>
            </li>
        </ul>
    </div>
}
@section scripts {
    <script type="text/javascript">
        (function ($, app) {
            app.registerHandler("clearAllHandler", function () {
                app.confirm(app.translate("Are you sure want to clear all notifications?"), app.translate("You won't be able to revert this!"), function (d) {
                    if (!d.value) return;

                    $.post(app.resolveUrl("~/api/notification/clear"), {}, function () {
                        app.refreshControl("notificationGrid");
                    });
                });
            });
        })(jQuery, app);
    </script>
}
<div class="row">
    <div class="col">
        <div class="card">
            <div class="card-header bordered">
                <h3 class="card-title">
                    @Localizer["Notification List"]
                </h3>
                <div class="heading-elements">
                    @await Html.PartialAsync("_NotificationToolbars")
                </div>
            </div>
            <div class="card-body p-0 no-table-header">
                @(Html.Kendo().Grid<TAMHR.ESS.Domain.Notification>()
                    .Name("notificationGrid")
                    .HtmlAttributes(new { @data_filter = "notification-filter" })
                    .Columns(columns =>
                    {
                        columns.Bound(c => c.Message).Title("Notification").ClientTemplate(@"
                            <div class=""d-block"">#=Message#</div>
                            <div class=""d-flex mt-1"">
                                <small class=""bold""><i class='icon-clock'></i> &nbsp;#:kendo.toString(CreatedOn, 'dd MMM yyyy - HH:mm tt')#</small>
                            </div>
                        ");
                    })
                    .DataSource(dataSource => dataSource
                        .Ajax()
                        .Read(read => read.Url(Url.Content("~/api/notification/gets")))
                        .Sort(sort => sort.Add("CreatedOn").Descending())
                    )
                    .NoRecords(config => config.Template(@"<div class=""text-center mt-2 p-2 text-muted""><i class=""fa fa-clipboard font-large-1""></i><br/>" + Localizer["No notifications"].Value + "</div>"))
                    .Events(evt =>
                    {
                        evt.DataBinding(@<text>function() {
                            this.element.removeClass("k-grid k-widget k-display-block");
                            this.element.find("table").addClass("table w-100 mb-1");
                        }</text>);
                    })
                    .Pageable(options =>
                    {
                        options.Input(true);
                        options.Numeric(false);
                        options.AlwaysVisible(false);
                    })
                    .Deferred()
                )
            </div>
        </div>
    </div>
</div>