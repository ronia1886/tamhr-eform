@{
    ViewData["Title"] = "News";
}
@{
    ScriptManager.RemoveReference("grid");
    ScriptManager.RegisterReference("listview");
}
@section pageToolbars {
    @await Html.PartialAsync("_Toolbars")
}
@section scripts {
    <script type="text/x-kendo-tmpl" id="template">
        <div class="col-lg-6 col-12">
            <div class="card box-shadow-1">
                <div class="card-content">
                    <img class="card-img-top img-fluid" src="#:app.resolveUrl(ImageUrl)#" alt="Card image cap">
                    <div class="card-body">
                        <h4 class="card-title"><a href="#:app.resolveUrl('~/news/' + SlugUrl)#" class="font-dark">#:Title#</a></h4>
                        <ul class="list-inline">
                            <li class="list-inline-item">
                                <span title="View Count" class="font-small-2"><i class="ft-eye"></i> #:ViewCount#</span>
                            </li>
                            <li class="list-inline-item">
                                <span title="Read Count" class="font-small-2"><i class="ft-book"></i> #:ReadCount#</span>
                            </li>
                        </ul>
                        <p class="card-text">#:ShortDescription#</p>
                    </div>
                </div>
                <div class="card-footer text-muted">
                    <span class="float-left"><i class="icon-clock"></i> &nbsp;#:kendo.toString(CreatedOn, "d MMM yyyy")#</span>
                    <span class="float-right">
                        <a href="#:app.resolveUrl('~/news/' + SlugUrl)#" class="card-link">@Localizer["Read More"] <i class="fa fa-angle-right"></i></a>
                    </span>
                </div>
            </div>
        </div>
    </script>
}
@(Html.Kendo().ListView<TAMHR.ESS.Domain.News>()
    .Name("newsListView")
    .TagName("div")
    .HtmlAttributes(new { @class = "row", data_filter = "news-filter" })
    .Events(evt => evt.DataBinding(@<text>function() { this.element.removeClass("k-widget k-listview") }</text>))
    .ClientTemplateId("template")
    .DataSource(dataSource => dataSource
        .Ajax()
        .Read(read => read.Url(Url.Content("~/api/news/gets")))
        .Sort(sort =>
        {
            sort.Add("CreatedOn").Descending();
            sort.Add("OrderIndex").Descending();
        })
        .PageSize(9)
    )
    .Deferred()
)